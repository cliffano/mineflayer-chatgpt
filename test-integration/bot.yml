---
- params:
    base: ../../../../..

- description: Start Minecraft server using Docker Compose
  command: 'make -f {base}/test-integration/fixtures/Makefile start-minecraft-server'
  exitcode: 0

- description: Set up example bot environment
  command: 'cd {base}/examples/ && ./setup.sh'
  exitcode: 0
  output: 'added .* package.*'

- description: Run example bot
  command: 'HOST=$(make -f {base}/test-integration/fixtures/Makefile get-minecraft-server-ip-address) node {base}/examples/bot.js'
  # exitcode: 0
  # output: '.*Example bot has been spawned.*'

- description: Stop and remove Minecraft server
  command: 'make -f {base}/test-integration/fixtures/Makefile stop-minecraft-server'
  exitcode: 0
  output: 'docker rm.*'
